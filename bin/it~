#!/usr/bin/env ruby
def attributes(attrs); @attributes = attrs; end
def command(cmd); @command = cmd; end
def config_file(templ); @template = templ; end

file = ARGV.shift
load file

real_command = []
template_arguments = {}
while (arg = ARGV.shift)
  if @attributes.include?(arg)
    template_arguments[args.sub("--","")] = ARGV.shift
  else
    real_command << arg
  end
end

real_command.insert(0, @command % template_arguments)

puts "Would execute #{real_command.inspect}"

require "rubygems"
require "pry"
binding.pry
